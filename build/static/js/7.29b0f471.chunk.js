(this.webpackJsonpchat_front=this.webpackJsonpchat_front||[]).push([[7],{324:function(e,t,a){"use strict";var n=a(16),o=a.n(n),c=a(34),r=a(24),i=a(14);t.a=function(){var e=Object(r.a)(),t=e.openErrorNotification,a=e.openSuccessNotification;return{postRequest:function(e){var n=e.url,r=e.bodyParams,l=void 0===r?{}:r,s=e.doFnAfterSuccess,d=void 0===s?null:s,u=e.doFnAfterError,m=void 0===u?null:u,f=e.messageOnSuccess,p=void 0===f?null:f,E=e.messageOnError,b=void 0===E?null:E;Object(c.a)((function(e){o.a.post("".concat(i.a.server).concat(n),l,{headers:{Authorization:e}}).then((function(t){p&&a(p),d&&d(t,e)})).catch((function(e){b&&t(b),m&&m(e)}))}))}}}},333:function(e){e.exports=JSON.parse('{"acceptInv":{"es":"Aceptar amigo","en":"Accept friend"},"errorAccepting":{"es":"Error al aceptar la solicitud","en":"Error accepting the friend request"}}')},334:function(e){e.exports=JSON.parse('{"block":{"es":"Bloquear contacto","en":"Block contact"},"onBlockError":{"es":"El contacto no se pudo bloquear","en":"Contact could not be block"}}')},359:function(e,t,a){"use strict";var n=a(1),o=a(2),c=a(0),r=(a(7),a(3)),i=a(5),l=a(116),s=c.forwardRef((function(e,t){var a=e.classes,i=e.className,s=Object(o.a)(e,["classes","className"]),d=c.useContext(l.a);return c.createElement("div",Object(n.a)({className:Object(r.a)(a.root,i,"flex-start"===d.alignItems&&a.alignItemsFlexStart),ref:t},s))}));t.a=Object(i.a)((function(e){return{root:{minWidth:56,color:e.palette.action.active,flexShrink:0,display:"inline-flex"},alignItemsFlexStart:{marginTop:8}}}),{name:"MuiListItemIcon"})(s)},363:function(e,t,a){"use strict";var n=a(2),o=a(13),c=a(1),r=a(0),i=(a(7),a(3)),l=a(5),s=a(358),d=r.forwardRef((function(e,t){var a,o=e.classes,l=e.className,d=e.component,u=void 0===d?"li":d,m=e.disableGutters,f=void 0!==m&&m,p=e.ListItemClasses,E=e.role,b=void 0===E?"menuitem":E,h=e.selected,g=e.tabIndex,v=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==g?g:-1),r.createElement(s.a,Object(c.a)({button:!0,role:b,tabIndex:a,component:u,selected:h,disableGutters:f,classes:Object(c.a)({dense:o.dense},p),className:Object(i.a)(o.root,l,h&&o.selected,!f&&o.gutters),ref:t},v))}));t.a=Object(l.a)((function(e){return{root:Object(c.a)({},e.typography.body1,Object(o.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)},374:function(e,t,a){"use strict";var n=a(1),o=a(2),c=a(0),r=(a(7),a(3)),i=a(5),l=a(116),s=c.forwardRef((function(e,t){var a=e.classes,i=e.className,s=Object(o.a)(e,["classes","className"]),d=c.useContext(l.a);return c.createElement("div",Object(n.a)({className:Object(r.a)(a.root,i,"flex-start"===d.alignItems&&a.alignItemsFlexStart),ref:t},s))}));t.a=Object(i.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(s)},375:function(e,t,a){"use strict";var n=a(1),o=a(2),c=a(0),r=(a(7),a(3)),i=a(5),l=c.forwardRef((function(e,t){var a=e.classes,i=e.className,l=Object(o.a)(e,["classes","className"]);return c.createElement("div",Object(n.a)({className:Object(r.a)(a.root,i),ref:t},l))}));l.muiName="ListItemSecondaryAction",t.a=Object(i.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(l)},378:function(e){e.exports=JSON.parse('{"errorLoadingFriends":{"es":"Error al cargar contactos","en":"Error while loading contacts"},"errorLoadingFriendsData":{"es":"Error al cargar datos de contactos","en":"Error while loading contacts data"},"delete":{"es":"Eliminar","en":"Delete"},"beta":{"es":"SHUT-APP V2.0.0 Beta es una aplicaci\xf3n web de chat realizada sin ning\xfan \xe1nimo de lucro. La informaci\xf3n ingresada en esta no ser\xe1 divulgada bajo ning\xfan concepto.","en":"SHUT-APP V2.0.0 Beta is a non-profit chat web application. The information entered will not be disclosed under any circumstances."},"goMakeFriends":{"es":"Agrega a tus amigos o comparte la aplicacion con ellos si no conocen sobre esta.","en":"Add your friends o share the application with them if they don\'t know about it."}}')},379:function(e){e.exports=JSON.parse('{"REQUESTED":{"es":"Estado: PENDIENTE","en":"State: PENDING"},"ASKED":{"es":"Estado: SOLICITADO","en":"State: REQUESTED"},"DECLINED":{"es":"Estado: RECHAZADO","en":"State: DECLINED"},"BLOCKED":{"es":"Estado: BLOQUEADO","en":"State: BLOCKED"},"DELETED":{"es":"Estado: ELIMINADO","en":"State: DELETED"},"descREQUESTED":{"es":"Estado: Esperando a que acepten su solicitud de amistad","en":"State: Waiting for the acceptance of the friend request"},"descASKED":{"es":"Estado: Este usuario solicita ser su amigo","en":"State: This user wants to be your friend"},"descDECLINED":{"es":"Estado: Su solicitud de amistad ha sido rechazada","en":"State: Your friend request has been declined"},"descBLOCKED":{"es":"Estado: Usted ha sido bloqueado por este contacto","en":"State: You have been bloked by this contact"},"descDELETED":{"es":"Estado: Usted ha sido eliminado por este contacto","en":"State: You have been deleted by this contact"}}')},380:function(e,t,a){"use strict";var n=a(95);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),c=(0,n(a(114)).default)(o.default.createElement("g",{fillRule:"evenodd"},o.default.createElement("path",{d:"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"})),"HowToReg");t.default=c},381:function(e){e.exports=JSON.parse('{"decline":{"es":"Cancelar peticion","en":"Decline request"},"errorDeclining":{"es":"Error al cancelar solicitud de amistad","en":"Error declining friend request"}}')},382:function(e,t,a){"use strict";var n=a(95);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),c=(0,n(a(114)).default)(o.default.createElement("path",{d:"M22 4h-2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h2V4zM2.17 11.12c-.11.25-.17.52-.17.8V13c0 1.1.9 2 2 2h5.5l-.92 4.65c-.05.22-.02.46.08.66.23.45.52.86.88 1.22L10 22l6.41-6.41c.38-.38.59-.89.59-1.42V6.34C17 5.05 15.95 4 14.66 4h-8.1c-.71 0-1.36.37-1.72.97l-2.67 6.15z"}),"ThumbDownAlt");t.default=c},383:function(e,t,a){"use strict";var n=a(95);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),c=(0,n(a(114)).default)(o.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=c},384:function(e){e.exports=JSON.parse('{"delete":{"es":"Eliminar contacto","en":"Delete contact"},"onDeleteError":{"es":"El contacto no se pudo eliminar","en":"Contact could not be removed"}}')},385:function(e,t,a){"use strict";var n=a(95);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),c=(0,n(a(114)).default)(o.default.createElement("path",{d:"M12.99 9.18c0-.06.01-.12.01-.18 0-2.21-1.79-4-4-4-.06 0-.12.01-.18.01l4.17 4.17zm-6.1-3.56L4.27 3 3 4.27l2.62 2.62C5.23 7.5 5 8.22 5 9c0 2.21 1.79 4 4 4 .78 0 1.5-.23 2.11-.62L19.73 21 21 19.73l-8.62-8.62-5.49-5.49zM9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"}),"VoiceOverOff");t.default=c},386:function(e,t,a){"use strict";var n=a(95);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(0)),c=(0,n(a(114)).default)(o.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=c},431:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(15),r=a(378),i=a(4),l=a(8),s=a(23),d=a(324),u=a(306),m=a(94),f=a(357),p=a(429),E=a(435),b=a(354),h=a(160),g=a(438),v=a(358),S=a(374),O=a(322),I=a(422),j=a(375),k=a(260),y=a(92),C=a(90),x=a(93),A=a(91),D=a(296),R=a(5),N=a(339),z=a.n(N),w=a(386),M=a.n(w),L=a(14),T=a(379),F=a(6),V=a(16),_=a.n(V),q=a(24),U=a(34),P=a(363),B=a(359),H=a(380),J=a.n(H),K=a(333),W=function(e){var t=e.idioma,a=e.onClick;return o.a.createElement(P.a,{onClick:a},o.a.createElement(B.a,null,o.a.createElement(J.a,{fontSize:"small",color:"primary"})),o.a.createElement(I.a,{primary:K.acceptInv[t]}))},G=a(17),Q=function(e){var t=e.preAction,a=e.contact,n=Object(i.useRecoilValue)(l.h),c=Object(i.useRecoilValue)(l.i),r=Object(q.a)().openErrorNotification,d=Object(i.useSetRecoilState)(s.d);return o.a.createElement(W,{idioma:n,onClick:function(){t();Object(U.a)((function(e){_.a.post("".concat(L.a.server,"/users/acceptFriendRequest"),{acceptedUserId:a.contactId},{headers:{Authorization:e}}).then((function(t){200===t.status&&(d({action:"update",payload:{friend:Object(F.a)(Object(F.a)({},t.data.friend),{},{socketId:a.socketId})}}),G.a.getSocket().emit("accept friendship",{accepterId:c.userId,socketIdRequester:a.socketId,token:e}))})).catch((function(e){r(K.errorAccepting[n])}))}))}})},Y=function(e){return o.a.createElement(Q,e)},Z=a(381),$=a(382),X=a.n($),ee=function(e){var t=e.idioma,a=e.text,n=e.onClick;return o.a.createElement(P.a,{onClick:n},o.a.createElement(B.a,null,o.a.createElement(X.a,{fontSize:"small",color:"error"})),o.a.createElement(I.a,{primary:a.decline[t]}))},te=function(e){var t=e.preAction,a=e.contact,n=Object(i.useRecoilValue)(l.h),c=Object(q.a)().openErrorNotification,r=Object(i.useSetRecoilState)(s.d),d=Object(i.useRecoilValue)(l.i);return o.a.createElement(ee,{idioma:n,onClick:function(){t();Object(U.a)((function(e){_.a.post("".concat(L.a.server,"/users/declineFriendRequest"),{declinedUserId:a.contactId},{headers:{Authorization:e}}).then((function(e){200===e.status&&r({action:"delete",payload:{friendId:a.contactId}})})).then((function(){G.a.getSocket().emit("decline friendship",{declinerId:d.userId,declinedId:a.contactId,socketIdDeclined:a.socketId,token:e})})).catch((function(e){c(Z.errorDeclining[n])}))}))},text:Z})},ae=function(e){return o.a.createElement(te,e)},ne=a(383),oe=a.n(ne),ce=function(e){var t=e.idioma,a=e.onClick,n=e.text;return o.a.createElement(P.a,{onClick:a},o.a.createElement(B.a,null,o.a.createElement(oe.a,{fontSize:"small",color:"error"})),o.a.createElement(I.a,{primary:n.delete[t]}))},re=a(384),ie=function(e){var t=e.preAction,a=e.contact,n=Object(i.useRecoilValue)(l.h),c=Object(i.useRecoilValue)(l.i),r=Object(d.a)().postRequest,u=Object(i.useSetRecoilState)(s.d);return o.a.createElement(ce,{idioma:n,text:re,onClick:function(){t(),r({url:"/users/deleteContact",bodyParams:{deletedUserId:a.contactId},messageOnError:re.onDeleteError[n],doFnAfterSuccess:function(e,t){200===e.status&&(u({action:"delete",payload:{friendId:a.contactId}}),1===a.friendShipStatus&&G.a.getSocket().emit("delete contact",{deleterId:c.userId,socketIdDeleted:a.socketId,token:t}))}})}})},le=function(e){return o.a.createElement(ie,e)},se=a(385),de=a.n(se),ue=a(334),me=function(e){var t=e.idioma,a=e.onClick;return o.a.createElement(P.a,{onClick:a},o.a.createElement(B.a,null,o.a.createElement(de.a,{fontSize:"small",color:"error"})),o.a.createElement(I.a,{primary:ue.block[t]}))},fe=function(e){var t=e.preAction,a=e.contact,n=Object(i.useRecoilValue)(l.h),c=Object(i.useRecoilValue)(l.i),r=Object(d.a)().postRequest,u=Object(i.useSetRecoilState)(s.d);return o.a.createElement(me,{idioma:n,onClick:function(){t(),r({url:"/users/blockUser",bodyParams:{blokedUserId:a.contactId},messageOnError:ue.onBlockError[n],doFnAfterSuccess:function(e,t){200===e.status&&(u({action:"delete",payload:{friendId:a.contactId}}),G.a.getSocket().emit("block contact",{blokerId:c.userId,socketIdBloked:a.socketId,token:t}))}})}})},pe=function(e){return o.a.createElement(fe,e)},Ee=function(e){var t=e.handleClose,a=e.contact,n=function(){t()};switch(a.friendShipStatus){case 1:return o.a.createElement(o.a.Fragment,null,o.a.createElement(le,{preAction:n,contact:a}),o.a.createElement(pe,{preAction:n,contact:a}));case 2:return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae,{preAction:n,contact:a}),o.a.createElement(pe,{preAction:n,contact:a}));case 3:return o.a.createElement(o.a.Fragment,null,o.a.createElement(Y,{preAction:n,contact:a}),o.a.createElement(ae,{preAction:n,contact:a}),o.a.createElement(pe,{preAction:n,contact:a}));case 4:return o.a.createElement(o.a.Fragment,null,o.a.createElement(le,{preAction:n,contact:a}),o.a.createElement(pe,{preAction:n,contact:a}));case 5:case 6:return o.a.createElement(le,{preAction:n,contact:a});default:return null}},be=Object(D.a)((function(e){return{infoIcon:{marginRight:"-12px",overflow:"visible",textAlign:"center",flex:"0 0 auto",color:"rgba(0, 0, 0, 0.54)",padding:"12px",fontSize:"1.5rem",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"50%",border:0,cursor:"pointer",margin:0,display:"inline-flex",outline:0,position:"relative",alignItems:"center",userSelect:"none",verticalAlign:"middle",justifyContent:"center",textDecoration:"none"},listItemText:{paddingRight:e.spacing(10)},primaryText:{color:e.palette.text.primary},secondaryText:{color:e.palette.text.secondary},avatarMan:{color:e.palette.getContrastText(y.a[400]),backgroundColor:y.a[400]},avatarWoman:{color:e.palette.getContrastText(C.a[300]),backgroundColor:C.a[300]}}})),he=Object(R.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px white","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(b.a),ge=Object(R.a)((function(e){return{badge:{backgroundColor:e.palette.grey[500],color:e.palette.grey[500],boxShadow:"0 0 0 2px white","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(b.a),ve=function(e){return e.contact.socketId&&1===e.contact.friendShipStatus?o.a.createElement(he,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},e.children):o.a.createElement(ge,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},e.children)},Se=Object(R.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return o.a.createElement(h.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Oe=Object(D.a)((function(e){return{arrow:{color:x.a[500]},tooltip:{backgroundColor:x.a[500]}}})),Ie=Object(D.a)((function(e){return{arrow:{color:A.a[500]},tooltip:{backgroundColor:A.a[500]}}})),je=function(e){var t=Ie(),a=Oe();return o.a.createElement(g.a,Object.assign({arrow:!0,classes:"red"===e.color?t:a},e))},ke=o.a.memo((function(e){var t=e.idioma,a=e.contact,n=e.handleMenu,c=e.handleClose,r=e.anchorEl,i=e.openChat,l=a.lastMsg?a.lastMsg:"",s="es"===t?{locale:E.a}:{},d=a.datetime?Object(p.a)(new Date(a.datetime),new Date,s):"";console.log(a);var u=be(),m=a.avatarUrl?"".concat(L.a.server).concat(a.avatarUrl):null,h="M"===a.gender?"avatarMan":"avatarWoman";return o.a.createElement(o.a.Fragment,null,o.a.createElement(v.a,{button:!0,onClick:i},o.a.createElement(S.a,null,o.a.createElement(ve,{contact:a},a.unread&&a.unread>0?o.a.createElement(b.a,{color:"secondary",badgeContent:a.unread},o.a.createElement(O.a,{src:m,className:a.gender&&u[h]})):o.a.createElement(O.a,{src:m,className:a.gender&&u[h]}))),o.a.createElement(I.a,{primary:a.nickname,secondary:a.friendShipStatus>1?T[a.friendShipStatusCode][t]:"".concat(l.slice(0,55),"... ").concat(d),secondaryTypographyProps:a.friendShipStatus>3?{style:{color:"".concat(A.a[500])}}:a.friendShipStatus<4&&a.friendShipStatus>1?{style:{color:"".concat(x.a[500])}}:{},className:u.listItemText,classes:{primary:u.primaryText,secondary:u.secondaryText}}),a.friendShipStatus>1?o.a.createElement(je,{title:T["desc".concat(a.friendShipStatusCode)][t],color:a.friendShipStatus>3?"red":"geen"},o.a.createElement("div",{className:u.infoIcon},o.a.createElement(M.a,{fontSize:"small",style:{color:a.friendShipStatus>3?A.a[500]:x.a[500]}}))):null,o.a.createElement(j.a,null,o.a.createElement(k.a,{edge:"end","aria-label":"delete",onClick:n},o.a.createElement(z.a,{fontSize:"default"})),o.a.createElement(Se,{id:"customized-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:c},o.a.createElement(Ee,{handleClose:c,contact:a})))),o.a.createElement(f.a,{variant:"inset",component:"li"}))})),ye=function(e){var t=e.contact,a=Object(n.useState)(null),r=Object(c.a)(a,2),d=r[0],u=r[1],m=Object(i.useRecoilValue)(l.h),f=Object(i.useRecoilValue)(l.i),p=Object(i.useSetRecoilState)(l.a),E=Object(i.useSetRecoilState)(s.d),b=Object(n.useCallback)((function(){u(null)}),[]);return o.a.createElement(ke,{handleMenu:function(e){u(e.currentTarget)},handleClose:b,contact:t,anchorEl:d,idioma:m,openChat:function(){p(t.contactId),E({action:"reset_cant_no_leidos",payload:{contactId:t.contactId}}),G.a.getSocket().emit("read messages",{userId:f.userId,contactId:t.contactId,notifyTo:t.socketId,token:localStorage.getItem("token")})}})},Ce=function(e){return o.a.createElement(ye,e)},xe=function(e){var t=e.idioma,a=e.text,n=e.contacts;return o.a.createElement(u.a,null,n.length>0?n.map((function(e){return o.a.createElement(Ce,{contact:e,key:e.contactId})})):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,null),o.a.createElement(m.a,{variant:"h5",align:"justify"},a.goMakeFriends[t]),o.a.createElement(f.a,null),o.a.createElement(m.a,{variant:"subtitle1",align:"justify"},a.beta[t])))},Ae=function(e){var t=Object(i.useSetRecoilState)(l.j),a=Object(d.a)().postRequest,u=Object(i.useRecoilState)(s.d),m=Object(c.a)(u,2),f=m[0],p=m[1],E=Object(i.useRecoilValue)(l.h),b=function(){0===f.length?a({url:"/users/searchFirends",messageOnError:r.errorLoadingFriends[E],doFnAfterSuccess:function(e){200===e.status&&(p({action:"initialize",payload:{friends:e.data.friends}}),t(!0),e.data.friends.length>0&&a({url:"/users/getContactData",messageOnError:r.errorLoadingFriendsData[E],doFnAfterSuccess:function(e){200===e.status&&p({action:"set_message_info",payload:{dataObj:e.data.contactsData}})}}))}}):console.log("NO LOS MANDA A BUSCAR")};return Object(n.useEffect)((function(){b()}),[]),o.a.createElement(xe,{idioma:E,contacts:f,text:r})};t.default=function(e){return o.a.createElement(Ae,null)}}}]);
//# sourceMappingURL=7.29b0f471.chunk.js.map