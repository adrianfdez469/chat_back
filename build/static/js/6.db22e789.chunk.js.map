{"version":3,"sources":["components/recoil/selectors.js","utils/axiosHook.js","../node_modules/@material-ui/core/esm/ListItemAvatar/ListItemAvatar.js","../node_modules/@material-ui/core/esm/ListItemSecondaryAction/ListItemSecondaryAction.js","../node_modules/@material-ui/core/esm/MenuItem/MenuItem.js","../node_modules/@material-ui/core/esm/ListItemIcon/ListItemIcon.js","../node_modules/@material-ui/icons/HowToReg.js","../node_modules/@material-ui/icons/ThumbDownAlt.js","../node_modules/@material-ui/icons/Delete.js","../node_modules/@material-ui/icons/VoiceOverOff.js","../node_modules/@material-ui/icons/Info.js","view/contacts/contact/acceptInvAction/acceptinv.view.js","view/contacts/contact/acceptInvAction/acceptInv.controller.js","view/contacts/contact/acceptInvAction/index.js","view/contacts/contact/declineInvAction/declineinv.view.js","view/contacts/contact/declineInvAction/declineInv.controller.js","view/contacts/contact/declineInvAction/index.js","view/contacts/contact/deleteAction/delete.view.js","view/contacts/contact/deleteAction/delete.controller.js","view/contacts/contact/deleteAction/index.js","view/contacts/contact/blockAction/block.view.js","view/contacts/contact/blockAction/block.controller.js","view/contacts/contact/blockAction/index.js","view/contacts/contact/contactAction.proxy.js","view/contacts/contact/contact.view.js","view/contacts/contact/contact.controller.js","view/contacts/contact/index.js","view/contacts/contacs.view.js","view/contacts/contacts.controller.js","view/contacts/index.js"],"names":["friendSelector","selector","key","get","friendsAtom","length","sort","f1","f2","friendShipStatus","socketId","email","set","a","action","payload","oldFriends","friends","push","friend","fIndex","findIndex","f","contactId","slice","concat","index","unread","data","dataObj","map","cantidad","lastMsg","lastMessage","datetime","activeChatWith","friendId","oldActive","filter","Array","isArray","idx","dat","userId","conectedFriendName","nickname","updatedFriend","notification","msg","idiomaState","variant","disconectedFriendName","initConversationSelector","conversation","getMessageState","userOriginId","UserDestinyId","readed","getConversationWithContact","oldConversation","message","_id","content","state","userOrigin","userDestiny","addMsgToConversationSelector","newMessageObj","messageId","editMsgToStateSavedSelector","consecutive","modMessage","editAllMsgToReadedSelector","useAxiosHook","useNotificationHook","openErrorNotification","openSuccessNotification","idioma","useRecoilValue","postRequest","url","bodyParams","doFnAfterSuccess","doFnAfterError","messageOnSuccess","messageOnError","authMidleware","token","axios","post","DEFAULT_CONFIG","server","headers","then","resp","catch","err","response","ListItemAvatar","React","props","ref","classes","className","other","_objectWithoutProperties","context","ListContext","_extends","clsx","root","alignItems","alignItemsFlexStart","withStyles","minWidth","flexShrink","marginTop","name","ListItemSecondaryAction","muiName","position","right","top","transform","MenuItem","tabIndex","_props$component","component","_props$disableGutters","disableGutters","ListItemClasses","_props$role","role","selected","tabIndexProp","disabled","undefined","ListItem","button","dense","gutters","theme","typography","body1","_defineProperty","minHeight","paddingTop","paddingBottom","boxSizing","width","overflow","whiteSpace","breakpoints","up","body2","ListItemIcon","color","palette","active","display","_interopRequireDefault","require","Object","defineProperty","exports","value","default","_react","_default","createElement","fillRule","d","AcceptInvActionView","onClick","fontSize","ListItemText","primary","text","acceptInv","AcceptInvActionController","preAction","contact","userData","loginData","friendDispatcher","useSetRecoilState","acceptedUserId","socketClient","getSocket","emit","accepterId","socketIdRequester","errorAccepting","AcceptInv","DeclineInvActionView","decline","DeclineInvActionController","declinedUserId","status","declinerId","declinedId","socketIdDeclined","errorDeclining","DeclineInv","DeleteActionView","delete","DeleteActionController","deletedUserId","onDeleteError","deleterId","socketIdDeleted","DeleteAction","BlockActionView","block","BlockActionController","blokedUserId","onBlockError","blokerId","socketIdBloked","BlockAction","ContactActionProxy","handleClose","useStyle","makeStyles","infoIcon","marginRight","textAlign","flex","padding","transition","borderRadius","border","cursor","margin","outline","userSelect","verticalAlign","justifyContent","textDecoration","listItemText","paddingRight","spacing","primaryText","secondaryText","secondary","avatarMan","getContrastText","blue","backgroundColor","avatarWoman","pink","OnlineStyledBadge","badge","boxShadow","left","height","animation","opacity","Badge","OfflineStyledBadge","grey","OnlineBadge","overlap","anchorOrigin","vertical","horizontal","children","StyledMenu","paper","Menu","elevation","getContentAnchorEl","transformOrigin","useCustomTooltipGreenStyle","arrow","green","tooltip","useCustomTooltipRedStyle","red","CustomTooltip","classesRed","classesGreen","Tooltip","ContactView","memo","handleMenu","anchorEl","openChat","options","locale","es","lastMsgTime","formatRelative","Date","avatarUrl","avatarGender","gender","badgeContent","Avatar","src","friendShipStatusCode","secondaryTypographyProps","style","title","IconButton","edge","aria-label","id","keepMounted","open","Boolean","onClose","Divider","ContactContrller","useState","setAnchorEl","setActiveChat","useCallback","event","currentTarget","notifyTo","localStorage","getItem","Contact","useStyles","scroll","flexGrow","flexDirection","overflowY","offsetDown","mixins","toolbar","bottom","ContactsView","contacts","List","Typography","align","goMakeFriends","beta","ContactsController","setSubscribeToEvents","subscribeToEventsState","useRecoilState","searchFriends","errorLoadingFriends","errorLoadingFriendsData","contactsData","useEffect","Contacts"],"mappings":"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","file":"static/js/6.db22e789.chunk.js","sourcesContent":["import {selector} from 'recoil';\r\n\r\nimport {friendsAtom, idiomaState, getConversationWithContact, activeChatWith} from './atoms';\r\n\r\nconst friendSelector = selector({\r\n    key: 'friendSelector',\r\n    get: ({get}) => {\r\n        if(get(friendsAtom).length > 0){\r\n            const friends = [...get(friendsAtom)];\r\n\r\n            return friends.sort(\r\n                (f1,f2) => {\r\n                    \r\n                    if(f1.friendShipStatus === 1 && f2.friendShipStatus === 1){\r\n                        if(f1.socketId && !f2.socketId) return -1;\r\n                        if(!f1.socketId && f2.socketId) return 1;    \r\n                    }\r\n                    if(f1.friendShipStatus < f2.friendShipStatus) return -1; \r\n                    if(f1.friendShipStatus > f2.friendShipStatus) return 1;\r\n                    if(f1.email < f2.email) return -1; \r\n                    if(f1.email > f2.email) return 1; \r\n                }\r\n            );\r\n        }else{\r\n            return [];\r\n        }\r\n        \r\n    },\r\n    set: async ({set, get}, {action, payload}) => {\r\n\r\n        switch(action){\r\n            case 'initialize': \r\n                set(friendsAtom, oldFriends => {\r\n                    if(oldFriends.length === 0){\r\n                        return payload.friends;\r\n                    }\r\n                    return oldFriends;\r\n                });\r\n                break;\r\n            case 'add':\r\n                set(friendsAtom, oldFriends => {\r\n                    const friends = [...oldFriends];\r\n                    friends.push(payload.friend);\r\n                    return friends;\r\n                });\r\n                break;\r\n            case 'update':\r\n                set(friendsAtom, oldFriends => {\r\n                    const fIndex = oldFriends.findIndex(f => f.contactId === payload.friend.contactId);\r\n                    const friends = oldFriends.slice(0, fIndex)\r\n                                            .concat([payload.friend])\r\n                                            .concat(oldFriends.slice(fIndex+1));\r\n                    return friends;\r\n                });\r\n                break;\r\n            case 'reset_cant_no_leidos':\r\n                set(friendsAtom, oldFriends => {\r\n                    const index = oldFriends.findIndex(friend => friend.contactId === payload.contactId);\r\n                    return oldFriends.slice(0, index).concat([{...oldFriends[index], unread: 0}]).concat(oldFriends.slice(index+1));\r\n                });\r\n                break;\r\n            case 'set_message_info': // Para poner la cantidad de mensajes sin leer, el ultimo mensaje y la fecha del ultimo mensaje\r\n                set(friendsAtom, oldFriends => {\r\n                    const data = payload.dataObj;\r\n                    const newFriends = oldFriends.map(friend => {\r\n                        if(data[friend.contactId]){\r\n                            let cantidad = 0;\r\n                            if(friend.unread){\r\n                                cantidad = friend.unread;\r\n                            }\r\n                            if(data[friend.contactId].cantidad){\r\n                                cantidad += data[friend.contactId].cantidad; \r\n                            }\r\n                            return {...friend, \r\n                                unread:  cantidad,\r\n                                lastMsg: data[friend.contactId].lastMessage,\r\n                                datetime: data[friend.contactId].datetime\r\n                            }\r\n                        }\r\n                        return friend;\r\n                    });\r\n                    return newFriends;\r\n                });\r\n            break;\r\n            case 'delete':\r\n                const activeChatContactId = get(activeChatWith);\r\n                if(activeChatContactId === payload.friendId){\r\n                    set(activeChatWith, oldActive => {\r\n                        return null;\r\n                    });\r\n                }\r\n                set(friendsAtom, oldFriends => {\r\n                    return oldFriends.filter(f => f.contactId !== payload.friendId);\r\n                });\r\n                break;\r\n            case 'connect':                \r\n                if(Array.isArray(payload.data)){\r\n                    set(friendsAtom, oldFriends => {\r\n                        return oldFriends.map(friend => {\r\n                            const idx = payload.data.findIndex(dat => dat.userId === friend.contactId);\r\n                            if(idx >= 0){\r\n                                return {...friend, socketId: payload.data[idx].socketId};     \r\n                            }\r\n                            return {...friend};\r\n                        });\r\n                    }); \r\n                }else{\r\n\r\n                    const {userId, socketId} = payload.data;\r\n                    let conectedFriendName = null;\r\n                    let friendShipStatus = 0;\r\n                    \r\n                    set(friendsAtom, oldFriends => {\r\n                        const fIndex = oldFriends.findIndex(f => f.contactId === userId);\r\n                        if(fIndex >= 0){\r\n                            conectedFriendName = oldFriends[fIndex].nickname;\r\n                            friendShipStatus = oldFriends[fIndex].friendShipStatus;\r\n                            const updatedFriend = {...oldFriends[fIndex], socketId: socketId };\r\n                        \r\n                            const friends = oldFriends.slice(0, fIndex)\r\n                                                    .concat([updatedFriend])\r\n                                                    .concat(oldFriends.slice(fIndex+1));\r\n                            return friends;\r\n                        }\r\n                        return oldFriends;\r\n                    });\r\n                    if(conectedFriendName && friendShipStatus === 1)\r\n                        payload.notification(`${conectedFriendName} ${payload.msg[get(idiomaState)]}`, {variant: 'info'});\r\n                }                \r\n                break;\r\n            case 'disconnect':\r\n                let disconectedFriendName = null;\r\n                let friendShipStatus = 0;\r\n                \r\n                set(friendsAtom, oldFriends => {\r\n                    \r\n                    const index = oldFriends.findIndex(friend => friend.socketId === payload.socketId);\r\n                    if(index >= 0){\r\n                        disconectedFriendName = oldFriends[index].nickname;\r\n                        friendShipStatus = oldFriends[index].friendShipStatus;\r\n                        return [...oldFriends].slice(0, index).concat([{...oldFriends[index], socketId: null}]).concat(oldFriends.slice(index+1));\r\n                    }\r\n                    return oldFriends;\r\n                });\r\n                if(disconectedFriendName && friendShipStatus === 1)\r\n                    payload.notification(`${disconectedFriendName} ${payload.msg[get(idiomaState)]}`, {variant: 'warning'});\r\n                break;\r\n            \r\n                default: break;\r\n        }\r\n    }\r\n});\r\n\r\n\r\n\r\nconst messageStates = {\r\n    'NINGUNO': 0, // Cuando no es enviado por el propio usuario, sino que se lo enviaron a el, por lo que los estados no tienen sentido para este tipo de mensajes\r\n    'ENVIADO': 1,\r\n    'GUARDADO': 2,\r\n    'LEIDO': 3\r\n};\r\n\r\nconst initConversationSelector = selector({\r\n    key:'conversationSelector',\r\n    set: ({set}, {contactId, conversation}) => {\r\n\r\n        const getMessageState = (userOriginId, UserDestinyId, contactId, readed) => {\r\n\r\n            if(userOriginId === contactId){\r\n                return 0;\r\n            }else if(UserDestinyId === contactId){\r\n                return readed ? 3 : 2;\r\n            }\r\n        }\r\n\r\n        set(getConversationWithContact(contactId), oldConversation => {\r\n            return conversation.map(message => {\r\n                return {\r\n                    _id: message._id,\r\n                    content: message.content,\r\n                    datetime: message.datetime,\r\n                    state: getMessageState(message.userOrigin, message.userDestiny, contactId, message.readed)\r\n                };\r\n            })\r\n        });\r\n    }\r\n});\r\n\r\nconst addMsgToConversationSelector = selector({\r\n    key: 'addMessageToConversation',\r\n    set: ({set}, {contactId, messageId, content, datetime, state}) => {\r\n        const newMessageObj = {\r\n            _id: messageId,\r\n            content: content,\r\n            datetime: datetime,\r\n            state: state\r\n        };        \r\n        \r\n        set(getConversationWithContact(contactId), oldConversation => {\r\n            return oldConversation.concat([newMessageObj]);\r\n        });\r\n\r\n    }\r\n});\r\n\r\n\r\nconst editMsgToStateSavedSelector = selector({\r\n    key: 'editMsgToStateSavedSelector',\r\n    set: ({set}, {contactId, messageId, datetime, consecutive}) => {\r\n        \r\n        set(getConversationWithContact(contactId), oldConversation => {\r\n            \r\n            const index = oldConversation.findIndex(message => message._id === consecutive && message.state === 1);\r\n            if(index >= 0){\r\n                const modMessage = {...oldConversation[index], state: 2, _id: messageId, datetime: datetime};\r\n                return oldConversation.slice(0, index).concat([modMessage]).concat(oldConversation.slice(index+1));\r\n            }\r\n            return oldConversation;\r\n        });\r\n    }\r\n});\r\n\r\nconst editAllMsgToReadedSelector = selector({\r\n    key: 'editAllMsgToSavedSelector',\r\n    set: ({set}, {contactId}) => {\r\n        set(getConversationWithContact(contactId), oldConversation => {\r\n            return oldConversation\r\n                .map(message => {\r\n                    if(message.state !== 0)\r\n                        return {...message, state: 3}\r\n                    else\r\n                        return message;\r\n                });\r\n        });\r\n    }\r\n});\r\n\r\nexport {friendSelector, initConversationSelector, addMsgToConversationSelector, editMsgToStateSavedSelector, editAllMsgToReadedSelector}","//import React from 'react';\r\nimport axios from 'axios';\r\nimport {useRecoilValue} from 'recoil';\r\nimport authMidleware from '../authMiddleware';\r\nimport useNotificationHook from '../components/uiComponents/notification/notification.hook';\r\nimport {DEFAULT_CONFIG} from '../conf/configuration';\r\nimport {idiomaState} from '../components/recoil/atoms';\r\n//import useBackdrop from '../components/uiComponents/backdrop/useBackdrop';\r\n\r\nconst useAxiosHook = () => {\r\n\r\n    const {openErrorNotification, openSuccessNotification} = useNotificationHook();\r\n    const {idioma} = useRecoilValue(idiomaState);\r\n    //const {closeBackDrop, showBackDrop} = useBackdrop();\r\n\r\n    const postRequest = ({url, bodyParams= {}, doFnAfterSuccess=null, doFnAfterError = null, messageOnSuccess=null, messageOnError=null}) => {\r\n        \r\n        const optimisticAction = token => {\r\n            //showBackDrop();\r\n            axios.post(`${DEFAULT_CONFIG.server}${url}`, \r\n                bodyParams, \r\n                {\r\n                    headers: {\r\n                        'Authorization': token\r\n                    }\r\n                })\r\n                .then(resp => {\r\n                    //closeBackDrop();\r\n                    if(messageOnSuccess) openSuccessNotification(messageOnSuccess);\r\n                    if(doFnAfterSuccess) doFnAfterSuccess(resp, token);\r\n                })\r\n                .catch(err => {\r\n                    //closeBackDrop();\r\n                    if(!err.response){\r\n                        if(idioma === 'es'){\r\n                            openErrorNotification(\"Error de conexión\");\r\n                        }else{\r\n                            openErrorNotification(\"Network error\");\r\n                        }                        \r\n                    }else if(messageOnError) openErrorNotification(messageOnError);\r\n\r\n                    if(doFnAfterError) doFnAfterError(err);\r\n                })\r\n        }\r\n        /*const pesimisticAction = () => {            \r\n            clearUserData();\r\n        }*/\r\n        \r\n        authMidleware(optimisticAction/*, pesimisticAction*/);\r\n    };   \r\n\r\n\r\n    return {postRequest};\r\n\r\n}\r\nexport default useAxiosHook;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListContext from '../List/ListContext';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    minWidth: 56,\n    flexShrink: 0\n  },\n\n  /* Styles applied to the root element when the parent `ListItem` uses `alignItems=\"flex-start\"`. */\n  alignItemsFlexStart: {\n    marginTop: 8\n  }\n};\n/**\n * A simple wrapper to apply `List` styles to an `Avatar`.\n */\n\nvar ListItemAvatar = /*#__PURE__*/React.forwardRef(function ListItemAvatar(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var context = React.useContext(ListContext);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, context.alignItems === 'flex-start' && classes.alignItemsFlexStart),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemAvatar.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component – normally `Avatar`.\n   */\n  children: PropTypes.element.isRequired,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemAvatar'\n})(ListItemAvatar);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nexport var styles = {\n  /* Styles applied to the root element. */\n  root: {\n    position: 'absolute',\n    right: 16,\n    top: '50%',\n    transform: 'translateY(-50%)'\n  }\n};\n/**\n * Must be used as the last child of ListItem to function properly.\n */\n\nvar ListItemSecondaryAction = /*#__PURE__*/React.forwardRef(function ListItemSecondaryAction(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemSecondaryAction.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component, normally an `IconButton` or selection control.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nListItemSecondaryAction.muiName = 'ListItemSecondaryAction';\nexport default withStyles(styles, {\n  name: 'MuiListItemSecondaryAction'\n})(ListItemSecondaryAction);","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListItem from '../ListItem';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body1, _defineProperty({\n      minHeight: 48,\n      paddingTop: 6,\n      paddingBottom: 6,\n      boxSizing: 'border-box',\n      width: 'auto',\n      overflow: 'hidden',\n      whiteSpace: 'nowrap'\n    }, theme.breakpoints.up('sm'), {\n      minHeight: 'auto'\n    })),\n    // TODO v5: remove\n\n    /* Styles applied to the root element if `disableGutters={false}`. */\n    gutters: {},\n\n    /* Styles applied to the root element if `selected={true}`. */\n    selected: {},\n\n    /* Styles applied to the root element if dense. */\n    dense: _extends({}, theme.typography.body2, {\n      minHeight: 'auto'\n    })\n  };\n};\nvar MenuItem = /*#__PURE__*/React.forwardRef(function MenuItem(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      _props$component = props.component,\n      component = _props$component === void 0 ? 'li' : _props$component,\n      _props$disableGutters = props.disableGutters,\n      disableGutters = _props$disableGutters === void 0 ? false : _props$disableGutters,\n      ListItemClasses = props.ListItemClasses,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'menuitem' : _props$role,\n      selected = props.selected,\n      tabIndexProp = props.tabIndex,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\", \"component\", \"disableGutters\", \"ListItemClasses\", \"role\", \"selected\", \"tabIndex\"]);\n\n  var tabIndex;\n\n  if (!props.disabled) {\n    tabIndex = tabIndexProp !== undefined ? tabIndexProp : -1;\n  }\n\n  return /*#__PURE__*/React.createElement(ListItem, _extends({\n    button: true,\n    role: role,\n    tabIndex: tabIndex,\n    component: component,\n    selected: selected,\n    disableGutters: disableGutters,\n    classes: _extends({\n      dense: classes.dense\n    }, ListItemClasses),\n    className: clsx(classes.root, className, selected && classes.selected, !disableGutters && classes.gutters),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? MenuItem.propTypes = {\n  /**\n   * Menu item contents.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object.isRequired,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes\n  /* @typescript-to-proptypes-ignore */\n  .elementType,\n\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input will be used.\n   */\n  dense: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * If `true`, the left and right padding is removed.\n   */\n  disableGutters: PropTypes.bool,\n\n  /**\n   * `classes` prop applied to the [`ListItem`](/api/list-item/) element.\n   */\n  ListItemClasses: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  role: PropTypes.string,\n\n  /**\n   * @ignore\n   */\n  selected: PropTypes.bool,\n\n  /**\n   * @ignore\n   */\n  tabIndex: PropTypes.number\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiMenuItem'\n})(MenuItem);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport withStyles from '../styles/withStyles';\nimport ListContext from '../List/ListContext';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: {\n      minWidth: 56,\n      color: theme.palette.action.active,\n      flexShrink: 0,\n      display: 'inline-flex'\n    },\n\n    /* Styles applied to the root element when the parent `ListItem` uses `alignItems=\"flex-start\"`. */\n    alignItemsFlexStart: {\n      marginTop: 8\n    }\n  };\n};\n/**\n * A simple wrapper to apply `List` styles to an `Icon` or `SvgIcon`.\n */\n\nvar ListItemIcon = /*#__PURE__*/React.forwardRef(function ListItemIcon(props, ref) {\n  var classes = props.classes,\n      className = props.className,\n      other = _objectWithoutProperties(props, [\"classes\", \"className\"]);\n\n  var context = React.useContext(ListContext);\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className, context.alignItems === 'flex-start' && classes.alignItemsFlexStart),\n    ref: ref\n  }, other));\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemIcon.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The content of the component, normally `Icon`, `SvgIcon`,\n   * or a `@material-ui/icons` SVG icon element.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiListItemIcon'\n})(ListItemIcon);","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"g\", {\n  fillRule: \"evenodd\"\n}, _react.default.createElement(\"path\", {\n  d: \"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z\"\n})), 'HowToReg');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M22 4h-2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h2V4zM2.17 11.12c-.11.25-.17.52-.17.8V13c0 1.1.9 2 2 2h5.5l-.92 4.65c-.05.22-.02.46.08.66.23.45.52.86.88 1.22L10 22l6.41-6.41c.38-.38.59-.89.59-1.42V6.34C17 5.05 15.95 4 14.66 4h-8.1c-.71 0-1.36.37-1.72.97l-2.67 6.15z\"\n}), 'ThumbDownAlt');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\n}), 'Delete');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12.99 9.18c0-.06.01-.12.01-.18 0-2.21-1.79-4-4-4-.06 0-.12.01-.18.01l4.17 4.17zm-6.1-3.56L4.27 3 3 4.27l2.62 2.62C5.23 7.5 5 8.22 5 9c0 2.21 1.79 4 4 4 .78 0 1.5-.23 2.11-.62L19.73 21 21 19.73l-8.62-8.62-5.49-5.49zM9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z\"\n}), 'VoiceOverOff');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)(_react.default.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"\n}), 'Info');\n\nexports.default = _default;","import React from 'react';\r\n//import { ListItem, ListItemAvatar, Avatar, ListItemText, ListItemSecondaryAction, ListItemIcon, IconButton, Badge, Divider, Menu, MenuItem } from '@material-ui/core';\r\nimport  MenuItem from '@material-ui/core/MenuItem';\r\nimport  ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport  ListItemText from '@material-ui/core/ListItemText';\r\nimport HowToRegIcon from '@material-ui/icons/HowToReg';\r\n\r\nimport text from './idioma.json';\r\n\r\nconst AcceptInvActionView = ({idioma, onClick}) => {\r\n\r\n    return ( \r\n        <MenuItem onClick={onClick}>\r\n            <ListItemIcon>\r\n                <HowToRegIcon fontSize=\"small\" color=\"primary\"/>\r\n            </ListItemIcon>\r\n            <ListItemText primary={text.acceptInv[idioma]} />\r\n        </MenuItem>\r\n    );\r\n\r\n}\r\nexport default AcceptInvActionView;","import React from 'react';\r\nimport {useRecoilValue, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, loginData/*, updateFriendSelector*/} from '../../../../components/recoil/atoms';\r\nimport {friendSelector} from '../../../../components/recoil/selectors';\r\n\r\n\r\nimport AcceptInvActionView from './acceptinv.view';\r\nimport text from './idioma.json';\r\nimport socketClient from '../../../../utils/socket';\r\nimport useAxiosHook from '../../../../utils/axiosHook';\r\n\r\nconst AcceptInvActionController = ({preAction, contact}) => {\r\n\r\n    const idioma = useRecoilValue(idiomaState);\r\n    const userData = useRecoilValue(loginData);\r\n    const {postRequest} = useAxiosHook();\r\n    //const switchContact = useSetRecoilState(updateFriendSelector);\r\n    const friendDispatcher = useSetRecoilState(friendSelector);\r\n\r\n    const onClick = () => {\r\n        preAction();\r\n\r\n        postRequest({\r\n            url: '/users/acceptFriendRequest',\r\n            bodyParams: {\r\n                acceptedUserId: contact.contactId\r\n            },\r\n            doFnAfterSuccess: (resp, token) => {\r\n                friendDispatcher({action: 'update', payload: {friend: {...resp.data.friend, socketId: contact.socketId}}});\r\n                const client = socketClient.getSocket();\r\n                \r\n                client.emit('accept friendship', {\r\n                    accepterId: userData.userId,\r\n                    socketIdRequester: contact.socketId,\r\n                    token: token\r\n                });\r\n            },\r\n            messageOnError: text.errorAccepting[idioma]\r\n        });\r\n        \r\n    }\r\n\r\n    return <AcceptInvActionView \r\n        idioma={idioma}\r\n        onClick={onClick}\r\n    />;\r\n\r\n}\r\nexport default AcceptInvActionController;","import React from 'react';\r\nimport AcceptInvController from './acceptInv.controller';\r\nconst AcceptInv = props => {\r\n\r\n    return <AcceptInvController {...props}/>;\r\n\r\n}\r\nexport default AcceptInv;","import React from 'react';\r\n//import { ListItem, ListItemAvatar, Avatar, ListItemText, ListItemSecondaryAction, ListItemIcon, IconButton, Badge, Divider, Menu, MenuItem } from '@material-ui/core';\r\nimport  MenuItem from '@material-ui/core/MenuItem';\r\nimport  ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport  ListItemText from '@material-ui/core/ListItemText';\r\nimport ThumbDownAltIcon from '@material-ui/icons/ThumbDownAlt';\r\n\r\nconst DeclineInvActionView = ({idioma, text, onClick}) => {\r\n\r\n    return ( \r\n        <MenuItem onClick={onClick}>\r\n            <ListItemIcon>\r\n                <ThumbDownAltIcon fontSize=\"small\" color=\"error\"/>\r\n            </ListItemIcon>\r\n            <ListItemText primary={text.decline[idioma]} />\r\n        </MenuItem>\r\n    );\r\n\r\n}\r\nexport default DeclineInvActionView;","import React from 'react';\r\nimport {useRecoilValue, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, loginData/*, deleteFriendSelector*/} from '../../../../components/recoil/atoms';\r\nimport { friendSelector } from '../../../../components/recoil/selectors';\r\nimport socketClient from '../../../../utils/socket';\r\nimport useAxiosHook from '../../../../utils/axiosHook';\r\nimport text from './idioma.json'\r\nimport DeclineInvActionView from './declineinv.view';\r\n\r\n\r\nconst DeclineInvActionController = ({preAction, contact}) => {\r\n\r\n    const idioma = useRecoilValue(idiomaState);\r\n    //const eliminarContacto = useSetRecoilState(deleteFriendSelector);\r\n    const friendDispatcher = useSetRecoilState(friendSelector);\r\n    const userData = useRecoilValue(loginData);\r\n    const {postRequest} = useAxiosHook();\r\n\r\n    const onClick = () => {\r\n        preAction();\r\n\r\n        postRequest({\r\n            url: '/users/declineFriendRequest',\r\n            bodyParams: {\r\n                declinedUserId: contact.contactId\r\n            },\r\n            doFnAfterSuccess: (resp, token) => {\r\n                if(resp.status === 200){\r\n                    friendDispatcher({action: 'delete', payload: {friendId: contact.contactId}});\r\n                    const socket = socketClient.getSocket();\r\n                    socket.emit('decline friendship', {\r\n                        declinerId: userData.userId,\r\n                        declinedId: contact.contactId,\r\n                        socketIdDeclined: contact.socketId,\r\n                        token: token\r\n                    });\r\n                }\r\n            },\r\n            messageOnError: text.errorDeclining[idioma]\r\n        });\r\n        \r\n    }\r\n\r\n    return <DeclineInvActionView \r\n        idioma={idioma}\r\n        onClick={onClick}\r\n        text={text}\r\n    />;\r\n\r\n}\r\nexport default DeclineInvActionController;","import React from 'react';\r\nimport DeclineInvController from './declineInv.controller';\r\nconst DeclineInv = props => {\r\n\r\n    return <DeclineInvController {...props}/>;\r\n\r\n}\r\nexport default DeclineInv;","import React from 'react';\r\n//import { ListItem, ListItemAvatar, Avatar, ListItemText, ListItemSecondaryAction, ListItemIcon, IconButton, Badge, Divider, Menu, MenuItem } from '@material-ui/core';\r\nimport  MenuItem from '@material-ui/core/MenuItem';\r\nimport  ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport  ListItemText from '@material-ui/core/ListItemText';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nconst DeleteActionView = ({idioma, onClick, text}) => {\r\n\r\n    return ( \r\n        <MenuItem onClick={onClick}>\r\n            <ListItemIcon>\r\n                <DeleteIcon fontSize=\"small\" color=\"error\"/>\r\n            </ListItemIcon>\r\n            <ListItemText primary={text.delete[idioma]} />\r\n        </MenuItem>\r\n    );\r\n\r\n}\r\nexport default DeleteActionView;","import React from 'react';\r\nimport {useRecoilValue, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, loginData/*, deleteFriendSelector*/} from '../../../../components/recoil/atoms';\r\nimport {friendSelector} from '../../../../components/recoil/selectors';\r\nimport useAxiosHook from '../../../../utils/axiosHook';\r\nimport DeleteActionView from './delete.view';\r\nimport text from './idioma.json';\r\nimport socketClient from '../../../../utils/socket';\r\n\r\nconst DeleteActionController = ({preAction, contact}) => {\r\n\r\n    const idioma = useRecoilValue(idiomaState);\r\n    const userData = useRecoilValue(loginData);\r\n    const {postRequest} = useAxiosHook();\r\n    //const deleteFriend = useSetRecoilState(deleteFriendSelector);\r\n    const friendDispatcher = useSetRecoilState(friendSelector);\r\n\r\n\r\n    const onClick = () => {\r\n\r\n        preAction();\r\n        postRequest({\r\n            url: '/users/deleteContact',\r\n            bodyParams: {deletedUserId: contact.contactId},\r\n            messageOnError: text.onDeleteError[idioma],\r\n            doFnAfterSuccess: (resp, token) => {\r\n                if(resp.status === 200){\r\n                    friendDispatcher({action: 'delete', payload: {friendId: contact.contactId}});\r\n\r\n                    if(contact.friendShipStatus === 1){\r\n                        const client = socketClient.getSocket();\r\n                        client.emit('delete contact', {\r\n                            deleterId: userData.userId,\r\n                            socketIdDeleted: contact.socketId,\r\n                            token: token\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return <DeleteActionView \r\n        idioma={idioma}\r\n        text={text}\r\n        onClick={onClick}\r\n    />;\r\n\r\n}\r\nexport default DeleteActionController;","import React from 'react';\r\nimport DeleteController from './delete.controller';\r\nconst DeleteAction = props => {\r\n\r\n    return <DeleteController {...props} />;\r\n\r\n}\r\nexport default DeleteAction;","import React from 'react';\r\n//import { ListItem, ListItemAvatar, Avatar, ListItemText, ListItemSecondaryAction, ListItemIcon, IconButton, Badge, Divider, Menu, MenuItem } from '@material-ui/core';\r\nimport  MenuItem from '@material-ui/core/MenuItem';\r\nimport  ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport  ListItemText from '@material-ui/core/ListItemText';\r\nimport VoiceOverOffIcon from '@material-ui/icons/VoiceOverOff';\r\n\r\nimport text from './idioma.json';\r\n\r\nconst BlockActionView = ({idioma, onClick}) => {\r\n\r\n    return ( \r\n        <MenuItem onClick={onClick}>\r\n            <ListItemIcon>\r\n                <VoiceOverOffIcon fontSize=\"small\" color=\"error\"/>\r\n            </ListItemIcon>\r\n            <ListItemText primary={text.block[idioma]} />\r\n        </MenuItem>\r\n    );\r\n\r\n}\r\nexport default BlockActionView;","import React from 'react';\r\nimport {useRecoilValue, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, loginData/*, deleteFriendSelector*/} from '../../../../components/recoil/atoms';\r\nimport {friendSelector} from '../../../../components/recoil/selectors';\r\nimport useAxiosHook from '../../../../utils/axiosHook';\r\nimport BlockActionView from './block.view';\r\nimport text from './idioma.json';\r\nimport socketClient from '../../../../utils/socket';\r\n\r\nconst BlockActionController = ({preAction, contact}) => {\r\n\r\n    const idioma = useRecoilValue(idiomaState);\r\n    const userData = useRecoilValue(loginData);\r\n    const {postRequest} = useAxiosHook();\r\n    //const deleteContact = useSetRecoilState(deleteFriendSelector);\r\n    const friendDispatcher = useSetRecoilState(friendSelector);\r\n\r\n    const onClick = () => {\r\n        preAction();\r\n        \r\n        postRequest({\r\n            url: '/users/blockUser',\r\n            bodyParams: {blokedUserId: contact.contactId},\r\n            messageOnError: text.onBlockError[idioma],\r\n            doFnAfterSuccess: (resp, token) => {\r\n                if(resp.status === 200){\r\n                    //deleteContact(contact.contactId);\r\n                    friendDispatcher({action: 'delete', payload: {friendId: contact.contactId}});\r\n                    const client = socketClient.getSocket();\r\n                    client.emit('block contact', {\r\n                        blokerId: userData.userId, \r\n                        socketIdBloked: contact.socketId,\r\n                        token: token\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    return <BlockActionView \r\n        idioma={idioma}\r\n        onClick={onClick}\r\n    />;\r\n\r\n}\r\nexport default BlockActionController;","import React from 'react';\r\nimport BlockController from './block.controller';\r\nconst BlockAction = props => {\r\n\r\n    return <BlockController {...props}/>;\r\n\r\n}\r\nexport default BlockAction;","import React from 'react';\r\n\r\nimport AcceptInv from './acceptInvAction';\r\nimport DeclineInv from './declineInvAction';\r\nimport DeleteFriend from './deleteAction';\r\nimport BlockContact from './blockAction';\r\n/*\r\n    1- ACEPTED -> Eliminar, Bloquear\r\n    2- REQUESTED -> Cancelar, Bloquear\r\n    3- ASKED -> Aceptar, Cancelar, bloquear\r\n    4- DECLINED -> Cancelar, Bloquear\r\n    5- Blocked -> Eliminar\r\n    6- Deleted -> Eliminar\r\n*/\r\n\r\nconst ContactActionProxy = ({handleClose, contact}) => {\r\n    \r\n\r\n    const preAction = () => {\r\n        handleClose()\r\n    }\r\n\r\n    \r\n    \r\n    switch(contact.friendShipStatus){\r\n        case 1: return (\r\n            <>\r\n                <DeleteFriend  preAction={preAction} contact={contact}/>\r\n                <BlockContact  preAction={preAction} contact={contact}/>\r\n            </>\r\n            );\r\n        case 2: return (\r\n            <>\r\n                <DeclineInv preAction={preAction} contact={contact}/>\r\n                <BlockContact preAction={preAction} contact={contact}/>\r\n            </>\r\n        ); \r\n        case 3: return (\r\n            <>\r\n                <AcceptInv  preAction={preAction} contact={contact}/>\r\n                <DeclineInv  preAction={preAction} contact={contact}/>\r\n                <BlockContact  preAction={preAction} contact={contact}/>\r\n            </>\r\n        );\r\n        case 4: return (\r\n            <>\r\n                <DeleteFriend  preAction={preAction} contact={contact}/>\r\n                <BlockContact  preAction={preAction} contact={contact}/>\r\n            </>\r\n        );\r\n        case 5: return <DeleteFriend  preAction={preAction} contact={contact}/>;\r\n        case 6: return <DeleteFriend  preAction={preAction} contact={contact}/>;\r\n        default: return null;\r\n    }\r\n}\r\n\r\nexport default ContactActionProxy;","import React from 'react';\r\nimport formatRelative from 'date-fns/formatRelative';\r\nimport  es from 'date-fns/locale/es';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport { red, green, blue, pink } from '@material-ui/core/colors';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\nimport text from './idioma.json';\r\n\r\nimport ActionProxy from './contactAction.proxy';\r\n\r\nconst useStyle = makeStyles((theme) => ({\r\n    infoIcon: {\r\n        marginRight: '-12px',\r\n        overflow: 'visible',\r\n        textAlign: 'center',\r\n        flex: '0 0 auto',\r\n        \r\n        color: 'rgba(0, 0, 0, 0.54)',\r\n        padding: '12px',\r\n        fontSize: '1.5rem',\r\n        transition: 'background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n        borderRadius: '50%',\r\n\r\n        \r\n        border: 0,\r\n        cursor: 'pointer',\r\n        margin: 0,\r\n        display: 'inline-flex',\r\n        outline: 0,\r\n        \r\n        position: 'relative',\r\n        alignItems: 'center',\r\n        userSelect: 'none',\r\n        \r\n        verticalAlign: 'middle',\r\n        \r\n        justifyContent: 'center',\r\n        textDecoration: 'none'\r\n    },\r\n    listItemText: {\r\n        paddingRight: theme.spacing(10)\r\n    },\r\n    primaryText: {\r\n        color: theme.palette.text.primary\r\n    },\r\n    secondaryText: {\r\n        color: theme.palette.text.secondary\r\n    },\r\n    avatarMan: {\r\n        color: theme.palette.getContrastText(blue[400]),\r\n        backgroundColor: blue[400],\r\n    },\r\n    avatarWoman: {\r\n        color: theme.palette.getContrastText(pink[300]),\r\n        backgroundColor: pink[300],\r\n    },\r\n}));\r\n\r\nconst OnlineStyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n        backgroundColor: '#44b700',\r\n        color: '#44b700',\r\n        boxShadow: `0 0 0 2px white`,\r\n        '&::after': {\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            borderRadius: '50%',\r\n            animation: '$ripple 1.2s infinite ease-in-out',\r\n            border: '1px solid currentColor',\r\n            content: '\"\"',\r\n        },\r\n    },\r\n    '@keyframes ripple': {\r\n        '0%': {\r\n            transform: 'scale(.8)',\r\n            opacity: 1,\r\n        },\r\n        '100%': {\r\n            transform: 'scale(2.4)',\r\n            opacity: 0,\r\n        },\r\n    },\r\n}))(Badge);\r\n\r\nconst OfflineStyledBadge = withStyles((theme) => ({\r\n    badge: {\r\n        backgroundColor: theme.palette.grey[500],\r\n        color: theme.palette.grey[500],\r\n\r\n        \r\n        \r\n        boxShadow: `0 0 0 2px white`,\r\n        '&::after': {\r\n            position: 'absolute',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            borderRadius: '50%',\r\n            border: '1px solid currentColor',\r\n            content: '\"\"',\r\n        },\r\n    },\r\n    '@keyframes ripple': {\r\n        '0%': {\r\n            transform: 'scale(.8)',\r\n            opacity: 1,\r\n        },\r\n        '100%': {\r\n            transform: 'scale(2.4)',\r\n            opacity: 0,\r\n        },\r\n    },\r\n}))(Badge);\r\n\r\nconst OnlineBadge = props => {\r\n    \r\n    if(props.contact.socketId && props.contact.friendShipStatus === 1){\r\n        return (<OnlineStyledBadge\r\n                overlap=\"circle\"\r\n                    anchorOrigin={{\r\n                        vertical: 'bottom',\r\n                        horizontal: 'right',\r\n                    }}\r\n                    variant=\"dot\"\r\n                >\r\n                    {props.children}\r\n                </OnlineStyledBadge>)\r\n            ;\r\n    }\r\n    else {\r\n        return (<OfflineStyledBadge\r\n            overlap=\"circle\"\r\n                anchorOrigin={{\r\n                    vertical: 'bottom',\r\n                    horizontal: 'right',\r\n                }}\r\n                variant=\"dot\"\r\n            >\r\n                {props.children}\r\n            </OfflineStyledBadge>)\r\n        ;\r\n    }\r\n}\r\n\r\nconst StyledMenu = withStyles({\r\n    paper: {\r\n      border: '1px solid #d3d4d5',\r\n    },\r\n  })((props) => (\r\n    <Menu\r\n      elevation={0}\r\n      getContentAnchorEl={null}\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      transformOrigin={{\r\n        vertical: 'top',\r\n        horizontal: 'center',\r\n      }}\r\n      {...props}\r\n    />\r\n  ));\r\nconst useCustomTooltipGreenStyle = makeStyles((theme) => ({\r\n    arrow: {\r\n      color: green[500]\r\n    },\r\n    tooltip: {\r\n      backgroundColor: green[500]\r\n    },\r\n  }));\r\n  const useCustomTooltipRedStyle = makeStyles((theme) => ({\r\n    arrow: {\r\n      color: red[500]\r\n    },\r\n    tooltip: {\r\n      backgroundColor: red[500]\r\n    },\r\n  }));\r\nconst CustomTooltip = props => {\r\n    const classesRed = useCustomTooltipRedStyle();\r\n    const classesGreen = useCustomTooltipGreenStyle();\r\n\r\n    return <Tooltip arrow classes={props.color === 'red' ? classesRed : classesGreen} {...props} />;\r\n}\r\n\r\n\r\nconst ContactView = React.memo(\r\n    ({idioma, contact, handleMenu,\r\n    handleClose, anchorEl, openChat}) => {\r\n    const lastMsg = contact.lastMsg ? contact.lastMsg : '' ;\r\n    \r\n    const options = idioma === 'es' ? { locale: es } : {};\r\n    const lastMsgTime = contact.datetime ? formatRelative(new Date(contact.datetime), new Date(), options) : '';\r\n    \r\n    \r\n    \r\n    const classes = useStyle();\r\n    //const avatarUrl = contact.avatarUrl ? `${DEFAULT_CONFIG.server}${contact.avatarUrl}` : null;\r\n    const avatarUrl = contact.avatarUrl ? contact.avatarUrl : null;\r\n\r\n    const avatarGender = contact.gender === \"M\" ? 'avatarMan' : \"avatarWoman\";\r\n\r\n    return (<>\r\n        <ListItem button onClick={openChat}>\r\n            <ListItemAvatar>\r\n                <OnlineBadge contact={contact}>\r\n                    {contact.unread && contact.unread > 0 \r\n                    ? <Badge color=\"secondary\" badgeContent={contact.unread}>\r\n                        <Avatar\r\n                            src={avatarUrl}\r\n                            className={contact.gender && classes[avatarGender]}\r\n                        />\r\n                    </Badge>\r\n                    : <Avatar\r\n                            src={avatarUrl}\r\n                            className={contact.gender && classes[avatarGender]}\r\n                        />\r\n                    }\r\n                </OnlineBadge>\r\n            </ListItemAvatar>\r\n                <ListItemText\r\n                    primary={contact.nickname}\r\n                    \r\n                    secondary={contact.friendShipStatus > 1 ? text[contact.friendShipStatusCode][idioma] : `${lastMsg.slice(0, 55)}... ${lastMsgTime}`}\r\n                    secondaryTypographyProps={contact.friendShipStatus > 3 \r\n                        ? {\r\n                            style: {color: `${red[500]}`}\r\n\r\n                        } \r\n                        : contact.friendShipStatus < 4 && contact.friendShipStatus > 1 ? {\r\n                            style: {color: `${green[500]}`}\r\n                        } : {}\r\n                    }\r\n                    className={classes.listItemText}\r\n                    classes={{\r\n                        primary: classes.primaryText,\r\n                        secondary: classes.secondaryText\r\n                    }}\r\n                />\r\n                \r\n                {contact.friendShipStatus > 1 ?\r\n                    <CustomTooltip title={text[`desc${contact.friendShipStatusCode}`][idioma]} color={contact.friendShipStatus > 3 ? 'red' : 'geen'}>\r\n                        <div className={classes.infoIcon}>\r\n                            <InfoIcon fontSize=\"small\" style={{color: contact.friendShipStatus > 3 ? red[500] : green[500]}}/>\r\n                        </div>\r\n                    </CustomTooltip>\r\n                : null }\r\n            \r\n            <ListItemSecondaryAction>\r\n                \r\n                \r\n                <IconButton edge=\"end\" aria-label=\"delete\" onClick={handleMenu}>\r\n                    <MoreVertIcon fontSize=\"default\"/>\r\n                </IconButton>\r\n                <StyledMenu\r\n                    id=\"customized-menu\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={Boolean(anchorEl)}\r\n                    onClose={handleClose}\r\n                >   \r\n                    <ActionProxy handleClose={handleClose} contact={contact}/>\r\n                </StyledMenu>\r\n            </ListItemSecondaryAction>\r\n            \r\n        </ListItem>\r\n        <Divider variant=\"inset\" component=\"li\" />\r\n        </>\r\n    );\r\n})\r\n\r\n\r\nexport default ContactView;","import React, {useState, useCallback} from 'react';\r\nimport {useRecoilValue, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, activeChatWith, loginData} from '../../../components/recoil/atoms';\r\nimport {friendSelector} from '../../../components/recoil/selectors';\r\nimport ContactView from './contact.view';\r\nimport socketClient from '../../../utils/socket';\r\n\r\nconst ContactContrller = ({contact}) => {\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const idioma = useRecoilValue(idiomaState);\r\n    const userData = useRecoilValue(loginData);\r\n    const setActiveChat = useSetRecoilState(activeChatWith);\r\n    const friendDispatcher = useSetRecoilState(friendSelector);\r\n    \r\n    const handleMenu = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    \r\n    const handleClose = useCallback(() => {\r\n        setAnchorEl(null);\r\n    },[]);\r\n\r\n    const openChat = () => {        \r\n        setActiveChat(contact.contactId);\r\n\r\n        // Poner el estado en leidos\r\n        friendDispatcher({\r\n            action: 'reset_cant_no_leidos',\r\n            payload: {\r\n                contactId: contact.contactId,\r\n            }\r\n        });\r\n        // Emit como leidos\r\n        const client = socketClient.getSocket();\r\n        client.emit('read messages', {\r\n            userId: userData.userId,\r\n            contactId: contact.contactId,\r\n            notifyTo: contact.socketId,\r\n            token: localStorage.getItem('token')\r\n        });\r\n    }\r\n\r\n    return <ContactView \r\n        handleMenu={handleMenu}\r\n        handleClose={handleClose}\r\n        contact={contact}\r\n        anchorEl={anchorEl}\r\n        idioma={idioma}\r\n        openChat={openChat}\r\n    />;\r\n\r\n}\r\nexport default ContactContrller;","import React from 'react';\r\n\r\nimport ContactController from './contact.controller';\r\nconst Contact = props => {\r\n\r\n    return <ContactController \r\n        {...props}\r\n    />;\r\n\r\n}\r\nexport default Contact;","import React, { useCallback } from 'react';\r\nimport List from '@material-ui/core/List';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport Contact from './contact';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    scroll: {\r\n        position: 'relative',\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflowY: 'auto',\r\n        height: `calc(100% - ${theme.spacing(8)}px)`\r\n    },\r\n    offsetDown: {\r\n        ...theme.mixins.toolbar, \r\n        bottom: 0,\r\n        position: 'relative'\r\n    }\r\n}));\r\n\r\n\r\nconst ContactsView = ({idioma, text, contacts}) => {\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.scroll}>\r\n            <List>\r\n                {contacts.length > 0 \r\n                    ? contacts.map((contact) => <Contact contact={contact} key={contact.contactId}/>)\r\n                    : <div style={{margin: '2em'}}>\r\n                    <Divider/>\r\n                        <Typography variant=\"h5\" align='justify'>{text.goMakeFriends[idioma]}</Typography>\r\n                        <Divider/>\r\n                        <Typography variant=\"subtitle1\" align='justify' style={{marginTop: '1em'}}>{text.beta[idioma]}</Typography>\r\n                    </div>\r\n                }\r\n            </List>\r\n            <div className={classes.offsetDown}/>\r\n            <div className={classes.offsetDown}/>\r\n        </div>\r\n    );\r\n\r\n}\r\nexport default ContactsView;","import React, { useEffect} from 'react';\r\nimport text from './idioma.json';\r\nimport {useRecoilValue, useRecoilState, useSetRecoilState} from 'recoil';\r\nimport {idiomaState, subscribeToEventsState/*friendSelector*/ /*, friendsAtom*/} from '../../components/recoil/atoms';\r\nimport {friendSelector} from '../../components/recoil/selectors';\r\nimport useAxiosHook from '../../utils/axiosHook';\r\n\r\nimport ContactsView from './contacs.view';\r\n\r\n\r\n\r\nconst ContactsController = props => {\r\n\r\n    const setSubscribeToEvents = useSetRecoilState(subscribeToEventsState);\r\n    //const setContacts = useSetRecoilState(friendsAtom);\r\n    const {postRequest} = useAxiosHook();\r\n    \r\n    //const [contacts, addContact] = useRecoilState(friendSelector);\r\n    const [contacts, friendDispatcher] = useRecoilState(friendSelector);\r\n\r\n    const idioma = useRecoilValue(idiomaState);\r\n\r\n    const getFriendData = () => {\r\n        postRequest({\r\n            url: '/users/getContactData',\r\n            messageOnError: text.errorLoadingFriendsData[idioma],\r\n            doFnAfterSuccess: resp => {\r\n                if(resp.status === 200){\r\n                    friendDispatcher({\r\n                        action: 'set_message_info',\r\n                        payload: {\r\n                            dataObj: resp.data.contactsData\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    const searchFriends = () => {\r\n        \r\n        if(contacts.length === 0){\r\n            \r\n            postRequest({\r\n                url: '/users/searchFirends',\r\n                messageOnError: text.errorLoadingFriends[idioma],\r\n                doFnAfterSuccess: resp => {\r\n                    if(resp.status === 200){\r\n                        \r\n                        friendDispatcher({\r\n                            action: 'initialize', \r\n                            payload: {\r\n                                friends: resp.data.friends\r\n                            }});\r\n                        setSubscribeToEvents(true);\r\n                        if(resp.data.friends.length > 0){\r\n                            getFriendData();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        searchFriends();\r\n    }, []);\r\n\r\n    return <ContactsView \r\n        idioma={idioma}\r\n        contacts={contacts}\r\n        text={text}\r\n\r\n    />;\r\n\r\n}\r\n\r\nexport default ContactsController;","import React from 'react';\r\nimport ContactsController from './contacts.controller';\r\nconst Contacts = props => {\r\n\r\n    return <ContactsController />;\r\n\r\n}\r\nexport default Contacts;"],"sourceRoot":""}